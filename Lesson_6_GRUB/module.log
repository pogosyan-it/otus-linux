]0;vagrant@lvm-grub:~[?1034h[vagrant@lvm-grub ~]$ mkdir /usr/lib/dracut/modules.d/01test[C[C-/usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cp/usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C /usr/lib/dracut/modules.d/01test
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ cp module-setup.sh test.sh /usr/lib/dracut/modules.d/01test/
cp: cannot create regular file â€˜/usr/lib/dracut/modules.d/01test/module-setup.shâ€™: Permission denied
cp: cannot create regular file â€˜/usr/lib/dracut/modules.d/01test/test.shâ€™: Permission denied
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo cp module-setup.sh test.sh /usr/lib/dracut/modules.d/01test/ 
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ dracut -f -v
Executing: /usr/bin/dracut -f -v
No permission to write to /boot.
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ dracut -f -v[1@s[1@u[C[1@d[1@o[1@ 
Executing: /sbin/dracut -f -v
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: test ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo lsinitrd -m /boot/initramfs-$(uname -r).img | grep test
test
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ chmod +x /usr/lib/dracut/modules.d/01test/test.sh [1@s[1@u[1@d[1@o[1@ 
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo chmod +x /usr/lib/dracut/modules.d/01test/test.sh [K[K[K[K[K[K[K[K
module-setup.sh  test.sh          
[vagrant@lvm-grub ~]$ sudo chmod +x /usr/lib/dracut/modules.d/01test/module-setup.sh 
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo lsinitrd -m /boot/initramfs-$(uname -r).img | grep test
test
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~] sudo dracut -f -v
Executing: /sbin/dracut -f -v
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: test ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo dracut -f -v[5P[C[C[C[C[C[C[C[C[C[C[C[Csudo lsinitrd -m /boot/initramfs-$(uname -r).img | grep test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cchmod +x /usr/lib/dracut/modules.d/01test/module-setup.sh [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[3Plsinitrd -m /boot/initramfs-$(uname -r).img | grep test
[01;31m[Ktest[m[K
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ cat /etc/default/grub 
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=OtusNewRoot/LogVol00 rd.-lvm.lv=OtusNewRoot/LogVol01 rhgb"
GRUB_DISABLE_RECOVERY="true"
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ 
cat /etc/default/grub 
sudo lsinitrd -m /boot/initramfs-$(uname -r).img | grep testb
sed: couldn't open temporary file /etc/default/sedt3dTmr: Permission denied
]0;vagrant@lvm-grub:~[vagrant@lvm-grub ~]$ sudo sed -i 's/OtusNewRoot\/LogVol01 rhgb/OtusNewRoot\/LogVol01/g' /etc/default/grub 
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=OtusNewRoot/LogVol00 rd.l$
GRUB_DISABLE_RECOVERY="true"
